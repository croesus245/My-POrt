Metadata-Version: 2.4
Name: fraudshield
Version: 0.1.0
Summary: Real-time fraud risk scoring with delayed labels and drift monitoring
Author-email: Abdul-Sobur Ayinde <abdulsobur245@gmail.com>
License: MIT
Classifier: Development Status :: 3 - Alpha
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Requires-Python: >=3.10
Description-Content-Type: text/markdown
Requires-Dist: numpy>=1.24.0
Requires-Dist: pandas>=2.0.0
Requires-Dist: scikit-learn>=1.3.0
Requires-Dist: xgboost>=2.0.0
Requires-Dist: pydantic>=2.0.0
Requires-Dist: pandera>=0.17.0
Requires-Dist: scipy>=1.11.0
Requires-Dist: evidently>=0.4.0
Requires-Dist: fastapi>=0.104.0
Requires-Dist: uvicorn>=0.24.0
Requires-Dist: pyyaml>=6.0
Requires-Dist: python-dotenv>=1.0.0
Requires-Dist: loguru>=0.7.0
Requires-Dist: click>=8.1.0
Requires-Dist: tqdm>=4.66.0
Requires-Dist: matplotlib>=3.8.0
Requires-Dist: seaborn>=0.13.0
Provides-Extra: dev
Requires-Dist: pytest>=7.4.0; extra == "dev"
Requires-Dist: pytest-cov>=4.1.0; extra == "dev"
Requires-Dist: pytest-asyncio>=0.21.0; extra == "dev"
Requires-Dist: httpx>=0.25.0; extra == "dev"
Requires-Dist: black>=23.0.0; extra == "dev"
Requires-Dist: ruff>=0.1.0; extra == "dev"
Requires-Dist: mypy>=1.6.0; extra == "dev"
Requires-Dist: pre-commit>=3.5.0; extra == "dev"

# FraudShield ðŸ›¡ï¸

**Real-time fraud detection with ML + business rules.**

## What This Does

```
Transaction comes in
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Is user on     â”‚ â”€â”€YESâ”€â”€â†’ BLOCK (skip ML)
â”‚  blocklist?     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ NO
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ML Model       â”‚ â†’ Risk Score (0-1)
â”‚  (XGBoost)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Score >= 0.9   â”‚ â”€â”€YESâ”€â”€â†’ BLOCK
â”‚  Score >= 0.7   â”‚ â”€â”€YESâ”€â”€â†’ CHALLENGE (OTP)
â”‚  Score < 0.3    â”‚ â”€â”€YESâ”€â”€â†’ ALLOW
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
    Return decision + explanation
```

## Quick Start

```bash
# 1. Install
pip install -e .

# 2. Generate fake data (realistic fraud patterns)
python -m scripts.generate_data

# 3. Train model
python -m scripts.train

# 4. Start API
python -m scripts.serve
```

## API Usage

```bash
# Simple check
curl -X POST http://localhost:8000/predict \
  -H "Content-Type: application/json" \
  -d '{"transaction_id": "t1", "amount": 5000, "user_id": "u1", "merchant_id": "m1", "merchant_category": "retail"}'

# Full check with explanation
curl -X POST http://localhost:8000/check \
  -H "Content-Type: application/json" \
  -d '{
    "transaction": {"transaction_id": "t1", "amount": 50000, "user_id": "u1", "merchant_id": "m1", "merchant_category": "electronics", "timestamp": "2024-01-15T10:00:00Z"},
    "device_signals": {"is_vpn": true, "is_new_device": true}
  }'
```

Response:
```json
{
  "risk_score": 0.75,
  "risk_tier": "high",
  "action": "challenge",
  "challenge_type": "otp",
  "risk_reasons": [
    {"feature": "is_vpn", "description": "VPN/proxy detected"},
    {"feature": "is_new_device", "description": "First transaction from this device"}
  ]
}
```

## Project Structure

```
fraudshield/
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ generate_data.py  # Create synthetic fraud data
â”‚   â”œâ”€â”€ train.py          # Train the model
â”‚   â””â”€â”€ serve.py          # Start the API
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ data/             # Schemas + data contracts
â”‚   â”œâ”€â”€ features/         # Feature engineering
â”‚   â”œâ”€â”€ models/           # ML model + predictor
â”‚   â”œâ”€â”€ rules/            # Business rules engine
â”‚   â””â”€â”€ serving/          # FastAPI app
â”œâ”€â”€ configs/              # Configuration
â””â”€â”€ tests/                # Tests
```

## How It Detects Fraud

**Signals we look at:**
| Signal | What it means | Why it matters |
|--------|---------------|----------------|
| `is_vpn` | Using VPN/proxy | Hiding real location |
| `is_new_device` | Never seen this device | Could be stolen credentials |
| `txn_count_1h` | Transactions in last hour | High velocity = suspicious |
| `account_age_days` | How old is the account | New accounts are riskier |
| `previous_fraud_flags` | Past fraud on this account | Repeat offenders |

**Rules that override ML:**
- Blocked user â†’ instant BLOCK
- 20+ transactions/hour â†’ BLOCK (velocity limit)
- VPN + high amount â†’ CHALLENGE

## The Delayed Labels Problem

In real life, you don't know immediately if a transaction is fraud.

Labels arrive **30-90 days later** via:
- Chargebacks (customer disputes)
- Investigations
- User reports

This project handles this by:
1. Logging predictions with timestamps
2. Joining labels when they arrive
3. Evaluating model on rolling windows

## Files Explained

| File | What it does |
|------|--------------|
| `scripts/generate_data.py` | Creates realistic synthetic fraud data |
| `scripts/train.py` | Trains XGBoost model with time-based split |
| `src/features/pipeline.py` | Transforms raw data â†’ ML features |
| `src/models/predictor.py` | Makes predictions + applies rules |
| `src/rules/engine.py` | Business rules (blocklists, velocity) |
| `src/serving/app.py` | FastAPI endpoints |

## License

MIT
