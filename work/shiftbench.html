<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShiftBench — Case Study</title>
    <meta name="description" content="Medical imaging benchmark under temporal and demographic distribution shift with calibration-aware evaluation.">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="../styles.css">
</head>
<body>
    <header class="header">
        <div class="header-container">
            <div class="header-left">
                <a href="../index.html" class="logo">Abdul-Sobur Ayinde</a>
                <span class="role">ML Systems Engineer</span>
            </div>
            <nav class="nav">
                <a href="../work.html" class="nav-link active">Work</a>
                <a href="../proof.html" class="nav-link">Proof</a>
                <a href="../writing.html" class="nav-link">Writing</a>
                <a href="../resume.pdf" class="nav-link" target="_blank">Resume</a>
                <a href="../contact.html" class="nav-link">Contact</a>
            </nav>
            <div class="header-right">
                <a href="mailto:abdulsobur245@gmail.com" class="email-link">abdulsobur245@gmail.com</a>
                <button class="hamburger" id="hamburger" aria-label="Toggle menu">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>
        </div>
        <nav class="mobile-nav" id="mobile-nav">
            <a href="../work.html" class="mobile-nav-link">Work</a>
            <a href="../proof.html" class="mobile-nav-link">Proof</a>
            <a href="../writing.html" class="mobile-nav-link">Writing</a>
            <a href="../resume.pdf" class="mobile-nav-link" target="_blank">Resume</a>
            <a href="../contact.html" class="mobile-nav-link">Contact</a>
        </nav>
    </header>

    <main class="case-study">
        <div class="container">
            <nav class="breadcrumb">
                <a href="../work.html">Work</a>
                <span>/</span>
                <span>ShiftBench</span>
            </nav>

            <header class="case-hero">
                <span class="case-lane">Research</span>
                <h1 class="case-title">ShiftBench</h1>
                <p class="case-tagline">A benchmark that stops hiding distribution shift. Train on 2015–2018, test on 2019–2022.</p>
                
                <div class="case-badges">
                    <span class="badge">Slice Metrics</span>
                    <span class="badge">Reproducible</span>
                    <span class="badge">Model Card</span>
                    <span class="badge">CI-Eval</span>
                </div>

                <div class="case-links">
                    <a href="https://github.com/croesus245/shiftbench-benchmark" class="btn btn-primary" target="_blank">View Repository →</a>
                    <a href="https://github.com/croesus245/shiftbench-benchmark/blob/main/results/README.md" class="btn btn-outline" target="_blank">Results</a>
                    <a href="https://github.com/croesus245/shiftbench-benchmark/blob/main/docs/dataset_datasheet.md" class="btn btn-outline" target="_blank">Dataset</a>
                </div>
            </header>

            <div class="case-content">
                <section class="case-section">
                    <h2>Problem</h2>
                    <p>ML benchmarks hide distribution shift. Models trained on 2018 data are tested on 2018 data—then deployed on 2025 data and fail silently.</p>
                    <p>Medical imaging is particularly vulnerable: scanners change, populations shift, annotation guidelines evolve. Most benchmarks ignore this, creating false confidence.</p>
                </section>

                <section class="case-section">
                    <h2>What Makes This Uncommon</h2>
                    <ul class="feature-list">
                        <li><strong>Temporal split:</strong> Train/test from different years, not random split</li>
                        <li><strong>Demographic subgroup analysis:</strong> Performance by skin tone proxy</li>
                        <li><strong>Calibration-first:</strong> Models ranked by calibrated accuracy, not just raw accuracy</li>
                        <li><strong>Uncertainty quantification:</strong> MC Dropout, ensemble, temperature scaling compared</li>
                        <li><strong>Negative results:</strong> What I tried that failed, and why</li>
                        <li><strong>Reproducibility:</strong> Exact splits, seeds, one-command reproduction</li>
                    </ul>
                </section>

                <section class="case-section">
                    <h2>Dataset</h2>
                    <p class="dataset-citation"><strong>Source:</strong> <a href="https://challenge.isic-archive.com/data/" target="_blank">ISIC 2019 Challenge</a> — 25,331 dermoscopic images, 8 diagnostic categories. CC BY-NC 4.0 license. See <a href="https://github.com/croesus245/shiftbench-benchmark/blob/main/docs/dataset_datasheet.md" target="_blank">datasheet</a> for full provenance.</p>
                    <div class="architecture-diagram">
                        <pre>
┌──────────────────────────────────────────────────────────────┐
│                      DATA PIPELINE                           │
├──────────────┬──────────────┬──────────────┬────────────────┤
│ ISIC 2019   │ Metadata     │ Shift        │ Stratified     │
│ (25K imgs)  │ (age, site)  │ Simulation   │ Splits         │
└──────────────┴──────────────┴──────────────┴────────────────┘
                              │
                              ▼
        Train: 18K  │  Test-IID: 2.5K  │  Test-Shift: 4.8K
                        </pre>
                    </div>
                    <div class="constraints-grid">
                        <div class="constraint">
                            <span class="constraint-label">Train Set</span>
                            <span class="constraint-value">18,000 images</span>
                        </div>
                        <div class="constraint">
                            <span class="constraint-label">Test-IID</span>
                            <span class="constraint-value">2,500 images</span>
                        </div>
                        <div class="constraint">
                            <span class="constraint-label">Test-Shift</span>
                            <span class="constraint-value">4,831 images</span>
                        </div>
                        <div class="constraint">
                            <span class="constraint-label">Classes</span>
                            <span class="constraint-value">Binary (lesion/no)</span>
                        </div>
                    </div>
                </section>

                <section class="case-section">
                    <h2>Results</h2>
                    <h3>Main Results (Test: 2019–2022)</h3>
                    <table class="eval-table">
                        <thead>
                            <tr>
                                <th>Model</th>
                                <th>Accuracy</th>
                                <th>Balanced Acc</th>
                                <th>ECE</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>ResNet-50</td>
                                <td>0.78</td>
                                <td>0.71</td>
                                <td>0.12</td>
                            </tr>
                            <tr>
                                <td>EfficientNet-B4</td>
                                <td>0.81</td>
                                <td>0.74</td>
                                <td>0.09</td>
                            </tr>
                            <tr class="highlight">
                                <td>ViT-B/16</td>
                                <td>0.84</td>
                                <td>0.77</td>
                                <td>0.07</td>
                            </tr>
                        </tbody>
                    </table>

                    <h3>Temporal Degradation</h3>
                    <table class="eval-table">
                        <thead>
                            <tr>
                                <th>Model</th>
                                <th>2019</th>
                                <th>2020</th>
                                <th>2021</th>
                                <th>2022</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>ResNet-50</td>
                                <td>0.82</td>
                                <td>0.79</td>
                                <td>0.76</td>
                                <td>0.74</td>
                            </tr>
                            <tr>
                                <td>EfficientNet-B4</td>
                                <td>0.84</td>
                                <td>0.82</td>
                                <td>0.79</td>
                                <td>0.78</td>
                            </tr>
                            <tr>
                                <td>ViT-B/16</td>
                                <td>0.87</td>
                                <td>0.85</td>
                                <td>0.82</td>
                                <td>0.81</td>
                            </tr>
                        </tbody>
                    </table>
                    <p class="eval-note">All models show degradation on newer data. ViT degrades least (6% drop vs 8% for ResNet).</p>

                    <h3>Demographic Slice Analysis</h3>
                    <table class="eval-table">
                        <thead>
                            <tr>
                                <th>Model</th>
                                <th>Light</th>
                                <th>Medium</th>
                                <th>Dark</th>
                                <th>Gap</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>ResNet-50</td>
                                <td>0.81</td>
                                <td>0.77</td>
                                <td>0.73</td>
                                <td>8%</td>
                            </tr>
                            <tr>
                                <td>EfficientNet-B4</td>
                                <td>0.84</td>
                                <td>0.80</td>
                                <td>0.78</td>
                                <td>6%</td>
                            </tr>
                            <tr>
                                <td>ViT-B/16</td>
                                <td>0.86</td>
                                <td>0.83</td>
                                <td>0.81</td>
                                <td>5%</td>
                            </tr>
                        </tbody>
                    </table>
                    <p class="eval-note">All models underperform on darker skin tones. This is a known limitation of the ISIC dataset.</p>
                </section>

                <section class="case-section">
                    <h2>Negative Results</h2>
                    <div class="negative-results">
                        <div class="negative-item">
                            <h4>❌ Mixup Augmentation</h4>
                            <p>No accuracy improvement. Hurt calibration (ECE increased by 0.03). Hypothesis: interpolating skin lesion images creates unrealistic examples.</p>
                        </div>
                        <div class="negative-item">
                            <h4>❌ Heavy Augmentation</h4>
                            <p>+2% accuracy, but ECE increased from 0.07 to 0.11. Model became overconfident on augmented distribution.</p>
                        </div>
                        <div class="negative-item">
                            <h4>❌ Focal Loss</h4>
                            <p>Marginal improvement on rare classes (+1%), but degraded common class performance (-2%). Net negative.</p>
                        </div>
                    </div>
                </section>

                <section class="case-section">
                    <h2>Limitations</h2>
                    <ul class="limitations-list">
                        <li>Fitzpatrick proxy is imperfect—derived from image luminance, not clinical annotation</li>
                        <li>ISIC data skews toward lighter skin tones (80%+ of dataset)</li>
                        <li>Temporal shift may conflate scanner changes with true distribution shift</li>
                        <li><strong>Not for clinical deployment</strong>—research benchmark only</li>
                        <li>Limited to dermoscopy images; doesn't generalize to other imaging modalities</li>
                    </ul>
                </section>

                <section class="case-section">
                    <h2>Artifacts</h2>
                    <div class="artifacts-grid">
                        <a href="https://github.com/croesus245/shiftbench-benchmark" class="artifact-link" target="_blank">
                            <span class="artifact-icon">[repo]</span>
                            <span>Repository</span>
                        </a>
                        <a href="https://github.com/croesus245/shiftbench-benchmark/blob/main/docs/dataset_datasheet.md" class="artifact-link" target="_blank">
                            <span class="artifact-icon">[data]</span>
                            <span>Dataset Datasheet</span>
                        </a>
                        <a href="https://github.com/croesus245/shiftbench-benchmark/blob/main/results/README.md" class="artifact-link" target="_blank">
                            <span class="artifact-icon">[results]</span>
                            <span>Full Results</span>
                        </a>
                        <a href="https://github.com/croesus245/shiftbench-benchmark/blob/main/docs/negative_results.md" class="artifact-link" target="_blank">
                            <span class="artifact-icon">[neg]</span>
                            <span>Negative Results</span>
                        </a>
                        <a href="https://github.com/croesus245/shiftbench-benchmark/blob/main/docs/reproduction_guide.md" class="artifact-link" target="_blank">
                            <span class="artifact-icon">[repro]</span>
                            <span>Reproduction Guide</span>
                        </a>
                        <a href="https://github.com/croesus245/shiftbench-benchmark/blob/main/docs/limitations.md" class="artifact-link" target="_blank">
                            <span class="artifact-icon">[lim]</span>
                            <span>Limitations</span>
                        </a>
                    </div>
                </section>
            </div>

            <nav class="case-nav">
                <a href="securerag.html" class="case-nav-link">← SecureRAG</a>
                <a href="../work.html" class="case-nav-link">Back to Work →</a>
            </nav>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>© 2025 Abdul-Sobur Ayinde · <a href="../contact.html">Get in touch</a></p>
        </div>
    </footer>

    <script src="../app.js"></script>
    <script>
        // Fallback hamburger handler
        document.addEventListener('DOMContentLoaded', function() {
            var hamburger = document.getElementById('hamburger');
            var mobileNav = document.getElementById('mobile-nav');
            if (hamburger && mobileNav) {
                hamburger.onclick = function() {
                    hamburger.classList.toggle('active');
                    mobileNav.classList.toggle('active');
                };
            }
        });
    </script>
</body>
</html>
